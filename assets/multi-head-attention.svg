<svg viewBox="0 0 700 450" xmlns="http://www.w3.org/2000/svg">
    <!-- Input -->
    <rect x="250" y="30" width="200" height="50" fill="#007AFF" opacity="0.2" rx="8"/>
    <text x="350" y="60" text-anchor="middle" font-family="SF Pro Display" font-size="16" fill="#007AFF">Input (batch, seq, d_model)</text>

    <!-- Linear Projections -->
    <path d="M 350 80 L 350 120" stroke="#007AFF" stroke-width="2" marker-end="url(#arrowblue)"/>

    <rect x="220" y="120" width="260" height="50" fill="#5856D6" opacity="0.2" rx="8"/>
    <text x="350" y="150" text-anchor="middle" font-family="SF Pro Display" font-size="14" fill="#5856D6">Linear Projections (Q, K, V)</text>

    <!-- Split into heads -->
    <path d="M 280 170 L 150 210" stroke="#5856D6" stroke-width="2" marker-end="url(#arrowpurple)"/>
    <path d="M 320 170 L 280 210" stroke="#5856D6" stroke-width="2" marker-end="url(#arrowpurple)"/>
    <path d="M 380 170 L 420 210" stroke="#5856D6" stroke-width="2" marker-end="url(#arrowpurple)"/>
    <path d="M 420 170 L 550 210" stroke="#5856D6" stroke-width="2" marker-end="url(#arrowpurple)"/>

    <!-- Attention Heads -->
    <rect x="70" y="210" width="100" height="60" fill="#FF9500" opacity="0.2" rx="8"/>
    <text x="120" y="235" text-anchor="middle" font-family="SF Pro Display" font-size="14" fill="#FF9500">Head 1</text>
    <text x="120" y="255" text-anchor="middle" font-family="SF Mono" font-size="11" fill="#666">Attention</text>

    <rect x="220" y="210" width="100" height="60" fill="#FF9500" opacity="0.2" rx="8"/>
    <text x="270" y="235" text-anchor="middle" font-family="SF Pro Display" font-size="14" fill="#FF9500">Head 2</text>
    <text x="270" y="255" text-anchor="middle" font-family="SF Mono" font-size="11" fill="#666">Attention</text>

    <rect x="380" y="210" width="100" height="60" fill="#FF9500" opacity="0.2" rx="8"/>
    <text x="430" y="235" text-anchor="middle" font-family="SF Pro Display" font-size="14" fill="#FF9500">Head 3</text>
    <text x="430" y="255" text-anchor="middle" font-family="SF Mono" font-size="11" fill="#666">Attention</text>

    <rect x="530" y="210" width="100" height="60" fill="#FF9500" opacity="0.2" rx="8"/>
    <text x="580" y="235" text-anchor="middle" font-family="SF Pro Display" font-size="14" fill="#FF9500">Head N</text>
    <text x="580" y="255" text-anchor="middle" font-family="SF Mono" font-size="11" fill="#666">Attention</text>

    <!-- Concatenate -->
    <path d="M 150 270 L 280 310" stroke="#FF9500" stroke-width="2" marker-end="url(#arroworange)"/>
    <path d="M 280 270 L 320 310" stroke="#FF9500" stroke-width="2" marker-end="url(#arroworange)"/>
    <path d="M 420 270 L 380 310" stroke="#FF9500" stroke-width="2" marker-end="url(#arroworange)"/>
    <path d="M 550 270 L 420 310" stroke="#FF9500" stroke-width="2" marker-end="url(#arroworange)"/>

    <rect x="250" y="310" width="200" height="50" fill="#32D74B" opacity="0.2" rx="8"/>
    <text x="350" y="340" text-anchor="middle" font-family="SF Pro Display" font-size="14" fill="#32D74B">Concatenate Heads</text>

    <!-- Output projection -->
    <path d="M 350 360 L 350 390" stroke="#32D74B" stroke-width="2" marker-end="url(#arrowgreen)"/>

    <rect x="250" y="390" width="200" height="50" fill="#555555" opacity="0.15" rx="8"/>
    <text x="350" y="420" text-anchor="middle" font-family="SF Pro Display" font-size="14" fill="#555555">Output Projection</text>

    <!-- Arrow definitions -->
    <defs>
        <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#007AFF" />
        </marker>
        <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#5856D6" />
        </marker>
        <marker id="arroworange" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#FF9500" />
        </marker>
        <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="5" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#32D74B" />
        </marker>
    </defs>
</svg>
